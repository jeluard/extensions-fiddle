// Compiled by ClojureScript 1.10.520 {:static-fns true, :optimize-constants true}
goog.provide('pluto.error');
goog.require('cljs.core');
goog.require('cljs.core.constants');
goog.require('cljs.spec.alpha');
cljs.spec.alpha.def_impl(cljs.core.cst$kw$pluto$error_SLASH_category,new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [cljs.core.cst$kw$pluto$error_SLASH_format,"null",cljs.core.cst$kw$pluto$error_SLASH_syntax,"null"], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 2, [cljs.core.cst$kw$pluto$error_SLASH_format,null,cljs.core.cst$kw$pluto$error_SLASH_syntax,null], null), null));
cljs.spec.alpha.def_impl(cljs.core.cst$kw$pluto$error_SLASH_type,new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 4, [cljs.core.cst$kw$pluto$error_SLASH_overridden,"null",cljs.core.cst$kw$pluto$error_SLASH_missing,"null",cljs.core.cst$kw$pluto$error_SLASH_unknown,"null",cljs.core.cst$kw$pluto$error_SLASH_invalid,"null"], null), null),new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 4, [cljs.core.cst$kw$pluto$error_SLASH_overridden,null,cljs.core.cst$kw$pluto$error_SLASH_missing,null,cljs.core.cst$kw$pluto$error_SLASH_unknown,null,cljs.core.cst$kw$pluto$error_SLASH_invalid,null], null), null));
cljs.spec.alpha.def_impl(cljs.core.cst$kw$pluto$error_SLASH_target,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_type,cljs.core.cst$kw$pluto$error_SLASH_key], null),cljs.core.cst$kw$opt,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_location], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([cljs.core.cst$kw$req_DASH_un,cljs.core.cst$kw$opt_DASH_un,cljs.core.cst$kw$gfn,cljs.core.cst$kw$pred_DASH_exprs,cljs.core.cst$kw$keys_DASH_pred,cljs.core.cst$kw$opt_DASH_keys,cljs.core.cst$kw$req_DASH_specs,cljs.core.cst$kw$req,cljs.core.cst$kw$req_DASH_keys,cljs.core.cst$kw$opt_DASH_specs,cljs.core.cst$kw$pred_DASH_forms,cljs.core.cst$kw$opt],[null,null,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__1650){
return cljs.core.map_QMARK_(G__1650);
}),(function (G__1650){
return cljs.core.contains_QMARK_(G__1650,cljs.core.cst$kw$pluto$error_SLASH_type);
}),(function (G__1650){
return cljs.core.contains_QMARK_(G__1650,cljs.core.cst$kw$pluto$error_SLASH_key);
})], null),(function (G__1650){
return ((cljs.core.map_QMARK_(G__1650)) && (cljs.core.contains_QMARK_(G__1650,cljs.core.cst$kw$pluto$error_SLASH_type)) && (cljs.core.contains_QMARK_(G__1650,cljs.core.cst$kw$pluto$error_SLASH_key)));
}),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_location], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_type,cljs.core.cst$kw$pluto$error_SLASH_key], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_type,cljs.core.cst$kw$pluto$error_SLASH_key], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_type,cljs.core.cst$kw$pluto$error_SLASH_key], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_location], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_map_QMARK_,cljs.core.cst$sym$_PERCENT_)),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$pluto$error_SLASH_type)),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$pluto$error_SLASH_key))], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_location], null)])));
cljs.spec.alpha.def_impl(cljs.core.cst$kw$pluto$error_SLASH_context,cljs.core.cst$sym$cljs$core_SLASH_map_QMARK_,cljs.core.map_QMARK_);
cljs.spec.alpha.def_impl(cljs.core.cst$kw$pluto$error_SLASH_error,cljs.core.list(cljs.core.cst$sym$cljs$spec$alpha_SLASH_keys,cljs.core.cst$kw$req,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_category,cljs.core.cst$kw$pluto$error_SLASH_type], null),cljs.core.cst$kw$opt,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_target,cljs.core.cst$kw$pluto$error_SLASH_context], null)),cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([cljs.core.cst$kw$req_DASH_un,cljs.core.cst$kw$opt_DASH_un,cljs.core.cst$kw$gfn,cljs.core.cst$kw$pred_DASH_exprs,cljs.core.cst$kw$keys_DASH_pred,cljs.core.cst$kw$opt_DASH_keys,cljs.core.cst$kw$req_DASH_specs,cljs.core.cst$kw$req,cljs.core.cst$kw$req_DASH_keys,cljs.core.cst$kw$opt_DASH_specs,cljs.core.cst$kw$pred_DASH_forms,cljs.core.cst$kw$opt],[null,null,null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__1651){
return cljs.core.map_QMARK_(G__1651);
}),(function (G__1651){
return cljs.core.contains_QMARK_(G__1651,cljs.core.cst$kw$pluto$error_SLASH_category);
}),(function (G__1651){
return cljs.core.contains_QMARK_(G__1651,cljs.core.cst$kw$pluto$error_SLASH_type);
})], null),(function (G__1651){
return ((cljs.core.map_QMARK_(G__1651)) && (cljs.core.contains_QMARK_(G__1651,cljs.core.cst$kw$pluto$error_SLASH_category)) && (cljs.core.contains_QMARK_(G__1651,cljs.core.cst$kw$pluto$error_SLASH_type)));
}),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_target,cljs.core.cst$kw$pluto$error_SLASH_context], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_category,cljs.core.cst$kw$pluto$error_SLASH_type], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_category,cljs.core.cst$kw$pluto$error_SLASH_type], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_category,cljs.core.cst$kw$pluto$error_SLASH_type], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_target,cljs.core.cst$kw$pluto$error_SLASH_context], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_map_QMARK_,cljs.core.cst$sym$_PERCENT_)),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$pluto$error_SLASH_category)),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_fn,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$sym$_PERCENT_], null),cljs.core.list(cljs.core.cst$sym$cljs$core_SLASH_contains_QMARK_,cljs.core.cst$sym$_PERCENT_,cljs.core.cst$kw$pluto$error_SLASH_type))], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.cst$kw$pluto$error_SLASH_target,cljs.core.cst$kw$pluto$error_SLASH_context], null)])));
pluto.error.create = (function pluto$error$create(category,type,target,context){
if(cljs.spec.alpha.valid_QMARK_.cljs$core$IFn$_invoke$arity$2(cljs.core.cst$kw$pluto$error_SLASH_category,category)){
} else {
throw (new Error("Assert failed: (spec/valid? :pluto.error/category category)"));
}

if(cljs.spec.alpha.valid_QMARK_.cljs$core$IFn$_invoke$arity$2(cljs.core.cst$kw$pluto$error_SLASH_type,type)){
} else {
throw (new Error("Assert failed: (spec/valid? :pluto.error/type type)"));
}

var G__1652 = new cljs.core.PersistentArrayMap(null, 2, [cljs.core.cst$kw$category,category,cljs.core.cst$kw$type,type], null);
var G__1652__$1 = (cljs.core.truth_(target)?cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__1652,cljs.core.cst$kw$target,target):G__1652);
if(cljs.core.truth_(context)){
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__1652__$1,cljs.core.cst$kw$context,context);
} else {
return G__1652__$1;
}
});
pluto.error.syntax = (function pluto$error$syntax(var_args){
var G__1654 = arguments.length;
switch (G__1654) {
case 1:
return pluto.error.syntax.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return pluto.error.syntax.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
case 3:
return pluto.error.syntax.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

pluto.error.syntax.cljs$core$IFn$_invoke$arity$1 = (function (type){
return pluto.error.syntax.cljs$core$IFn$_invoke$arity$2(type,null);
});

pluto.error.syntax.cljs$core$IFn$_invoke$arity$2 = (function (type,target){
return pluto.error.syntax.cljs$core$IFn$_invoke$arity$3(type,target,null);
});

pluto.error.syntax.cljs$core$IFn$_invoke$arity$3 = (function (type,target,context){
return pluto.error.create(cljs.core.cst$kw$pluto$error_SLASH_syntax,type,target,context);
});

pluto.error.syntax.cljs$lang$maxFixedArity = 3;

pluto.error.update_errors = (function pluto$error$update_errors(m,errors){
if(cljs.core.seq(errors)){
return cljs.core.update.cljs$core$IFn$_invoke$arity$4(m,cljs.core.cst$kw$errors,cljs.core.concat,errors);
} else {
return m;
}
});
pluto.error.update_data = (function pluto$error$update_data(m,f,data){
if(cljs.core.truth_(data)){
return cljs.core.update.cljs$core$IFn$_invoke$arity$4(m,cljs.core.cst$kw$data,f,data);
} else {
return m;
}
});
pluto.error.merge_result = (function pluto$error$merge_result(var_args){
var G__1657 = arguments.length;
switch (G__1657) {
case 2:
return pluto.error.merge_result.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
case 3:
return pluto.error.merge_result.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

pluto.error.merge_result.cljs$core$IFn$_invoke$arity$2 = (function (m,mm){
return pluto.error.merge_result.cljs$core$IFn$_invoke$arity$3(cljs.core.merge,m,mm);
});

pluto.error.merge_result.cljs$core$IFn$_invoke$arity$3 = (function (f,m,p__1658){
var map__1659 = p__1658;
var map__1659__$1 = (((((!((map__1659 == null))))?(((((map__1659.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__1659.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__1659):map__1659);
var data = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__1659__$1,cljs.core.cst$kw$data);
var errors = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__1659__$1,cljs.core.cst$kw$errors);
return pluto.error.update_errors(pluto.error.update_data(m,f,data),errors);
});

pluto.error.merge_result.cljs$lang$maxFixedArity = 3;

pluto.error.merge_results = (function pluto$error$merge_results(var_args){
var args__4736__auto__ = [];
var len__4730__auto___1663 = arguments.length;
var i__4731__auto___1664 = (0);
while(true){
if((i__4731__auto___1664 < len__4730__auto___1663)){
args__4736__auto__.push((arguments[i__4731__auto___1664]));

var G__1665 = (i__4731__auto___1664 + (1));
i__4731__auto___1664 = G__1665;
continue;
} else {
}
break;
}

var argseq__4737__auto__ = ((((0) < args__4736__auto__.length))?(new cljs.core.IndexedSeq(args__4736__auto__.slice((0)),(0),null)):null);
return pluto.error.merge_results.cljs$core$IFn$_invoke$arity$variadic(argseq__4737__auto__);
});

pluto.error.merge_results.cljs$core$IFn$_invoke$arity$variadic = (function (ms){
return cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(pluto.error.merge_result,cljs.core.PersistentArrayMap.EMPTY,ms);
});

pluto.error.merge_results.cljs$lang$maxFixedArity = (0);

/** @this {Function} */
pluto.error.merge_results.cljs$lang$applyTo = (function (seq1662){
var self__4718__auto__ = this;
return self__4718__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq(seq1662));
});

pluto.error.merge_results_with = (function pluto$error$merge_results_with(var_args){
var args__4736__auto__ = [];
var len__4730__auto___1670 = arguments.length;
var i__4731__auto___1671 = (0);
while(true){
if((i__4731__auto___1671 < len__4730__auto___1670)){
args__4736__auto__.push((arguments[i__4731__auto___1671]));

var G__1672 = (i__4731__auto___1671 + (1));
i__4731__auto___1671 = G__1672;
continue;
} else {
}
break;
}

var argseq__4737__auto__ = ((((1) < args__4736__auto__.length))?(new cljs.core.IndexedSeq(args__4736__auto__.slice((1)),(0),null)):null);
return pluto.error.merge_results_with.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),argseq__4737__auto__);
});

pluto.error.merge_results_with.cljs$core$IFn$_invoke$arity$variadic = (function (f,ms){
return cljs.core.reduce.cljs$core$IFn$_invoke$arity$3((function (p1__1666_SHARP_,p2__1667_SHARP_){
return pluto.error.merge_result.cljs$core$IFn$_invoke$arity$3(f,p1__1666_SHARP_,p2__1667_SHARP_);
}),cljs.core.PersistentArrayMap.EMPTY,ms);
});

pluto.error.merge_results_with.cljs$lang$maxFixedArity = (1);

/** @this {Function} */
pluto.error.merge_results_with.cljs$lang$applyTo = (function (seq1668){
var G__1669 = cljs.core.first(seq1668);
var seq1668__$1 = cljs.core.next(seq1668);
var self__4717__auto__ = this;
return self__4717__auto__.cljs$core$IFn$_invoke$arity$variadic(G__1669,seq1668__$1);
});

